
<div *ngIf="error">{{error}}</div>
<div *ngIf="authorised">
  <div class="container">
    <h1>Crear post</h1>
    
    <form #mapForm="ngForm">
      
      <div class="form-group">
        <label for="titleinput">Titulo</label>
        <input type="text" class="form-control" id="titleinput"
                [(ngModel)]="title" name="title">
      </div>
      <div class="form-group">
        <label for="locationinput">Localizacion</label>
        <input type="text" class="form-control" id="locationinput"
                [(ngModel)]="locationName" name="location" on-focusout="getCoordinates()">
        <button type="button" class="btn btn-default mt-3" (click)="getCoordinates()">Encontrar</button>
      </div>

      <!-- <div class="form-group">
        <label for="userPhotoId">Tomar fotografia o anadir imagen</label>
        <input type="file" id="userPhotoId"
                [(ngModel)]="userPhoto" name="userPhotoModel"
                (change)="setPhotoFile($event)">         
      </div> -->

      <div class="form-group">
        <label for="userPhotoId">Tomar fotografia o anadir imagen</label>
        <input type="file" id="userPhotoId" accept="image/*" capture="environment"
                [(ngModel)]="userPhoto" name="userPhotoModel"
                (change)="setPhotoFile($event)">         
      </div>

      <div class="form-group">
        <label for="descriptioninput">Descripcion</label>
        <textarea  type="text" class="form-control" id="descriptioninput"
                [(ngModel)]="description" name="description"></textarea>
      </div>
      <div class="form-group">
        <label for="urlinput">Link a articulo</label>
        <input type="text" class="form-control" id="urlinput"
                [(ngModel)]="url" name="url">
      </div>

      <button type="button" class="btn btn-default" (click)="uploadUserPhoto()">Crear Post</button>
    </form>
  </div>
</div>

<div *ngIf="formatedAddress">{{formatedAddress}}</div>
<img *ngIf="codeCountry" src="http://www.countryflags.io/{{codeCountry}}/shiny/64.png">

<!-- No creo que necesitemos mapa aqui <div #gmap style="width:500px;height:300px"></div> -->

<div *ngIf="!authorised">
    <a class="default-box" routerLink="/userlogin">Log in to create new post</a>
</div>

<!-- <script>

  function hasGetUserMedia() {
    return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);
  }
  
  if (hasGetUserMedia()) {
    alert('there we go!!!');
  } else {
    alert('getUserMedia() is not supported by your browser');
  }

</script> -->

